!function(a,b,c,d,e,f){"use strict";e.define("sortable",[],function(){return{sInput:null,oTarget:[],delay:500,placeholer:'<li class="placeholder" data-fc-modules="va">',oDefault:{oldContainer:null,group:"this",nested:!1},afterMove:function(a,b){var c=f(b.el).closest("ol[data-fc-modules=sortable]")[0];this.oldContainer!=b&&(this.oldContainer&&this.oldContainer.el.removeClass("active"),b.el.addClass("active"),this.oldContainer=b),this.showEmptyList(c),this.hideEmptyList(c),f(c).sortable("refresh")},onDrop:function(a,b,c){var d,e=f(b.el).closest("ol[data-fc-modules=sortable]")[0]?f(b.el).closest("ol[data-fc-modules=sortable]")[0]:f(b.el)[0];void 0!==e&&(d="json"===e.getAttribute("data-fc-output")?this.serialize(e):this.arraylize(e),null!==e.getAttribute("data-fc-input")&&this.fillInput(e.getAttribute("data-fc-input"),d),null!==e.getAttribute("data-fc-url")&&this.sendAjax(e.getAttribute("data-fc-url"),d)),b.el.removeClass("active");var g=f(a);g.removeClass("dragged").removeAttr("style"),f("body").removeClass("dragging"),this.hideEmptyList(e),c(a)},onDrag:function(a,b,c,d){a.offset(f(".placeholder").offset())},onDragStart:function(a,b,c,d){f(a.context).closest("ol[data-fc-modules=sortable]")[0];a.addClass("dragged"),f("body").addClass("dragging")},isValidTarget:function(a,b){var c=f(a.context).closest("ol[data-fc-modules=sortable]")[0];if(void 0!==c){var d=f(b.el.context,"#"+c.id).parents("ol").length+1,e=null!==c.getAttribute("data-fc-depth")?c.getAttribute("data-fc-depth"):2;return!(d>e)&&!(void 0!==f(".dragged").find("li")[0]&&d>e-1)}return!0},addEmptyList:function(a){void 0!==a&&f("li",a).each(function(){void 0===f("ol",this)[0]&&f(this).append('<ol class="sub-sortable"></ol>')}),f(a).sortable("refresh")},hideEmptyList:function(a){if(void 0!==a){var b,c=null!==a.getAttribute("data-fc-depth")?a.getAttribute("data-fc-depth"):2;f("li",a).each(function(){b=f(this,"#"+a.id).parents("ol").length,b>=c&&f("ol",this).css({height:"1px",padding:"0px",margin:"0px",background:"transparent",position:"absolute"})})}},showEmptyList:function(a){void 0!==a&&f("li",a).each(function(){void 0===f("ol li",this)[0]&&f("ol",this).removeAttr("style")}),f(a).sortable("refresh")},onStart:function(){var a=b.querySelectorAll('[data-fc-modules="sortable"]'),e=this;d.loadCSS(c.sPathCss+"secondary.css?v="+c.sHash),d.trackModule("JS_Libraries","call","sortable"),f(a).each(function(a){e.autobind(this,a)})},arraylize:function(a){var b=f("li",a).length,c="";return f("li",a).each(function(a){""!==this.id&&(c+=this.id?this.id:this.innerHTML),a!==b-1&&""!==this.id&&(c+=",")}),c},getSubTree:function(a){var b={},c=this;return a.each(function(a){b[a]={order:a+1,id:null!==this.getAttribute("data-fc-id")?this.getAttribute("data-fc-id"):this.id,name:null!==this.getAttribute("data-fc-name")?this.getAttribute("data-fc-name"):this.id,subtree:c.getSubTree(f(this).find("> ol").find("> li"))}}),b},serialize:function(a){return this.getSubTree(f("#"+a.id+"> li"))},fillInput:function(a,c){"object"==typeof c&&(c=JSON.stringify(c)),b.getElementById(a).value=c},sendAjax:function(a,b){var c=JSON.stringify(b);f.ajax({url:a,type:"POST",data:{data:c},dataType:"json"})},autobind:function(a,b){var c,e={},g=Math.random(1e3).toString(),h=this;""===a.id&&(a.id="sortable-"+g.replace(".","")),"nested"===a.getAttribute("data-fc-type")&&(f(a).addClass("js-sortable"),e.nested=!0),this.addEmptyList(a),this.hideEmptyList(a),e.isValidTarget=this.isValidTarget,e.addEmptyList=this.addEmptyList,e.showEmptyList=this.showEmptyList,e.hideEmptyList=this.hideEmptyList,e.afterMove=this.afterMove,e.onDrop=this.onDrop,e.onDrag=this.onDrag,e.onDragStart=this.onDragStart,null!==a.getAttribute("data-fc-handle")&&(e.handle=a.getAttribute("data-fc-handle")),c=d.mergeOptions(h.oDefault,e),h.oTarget[b]=f(a).sortable(c),d.removeLoading(a)}}})}(window,document,oGlobalSettings,FrontendTools,FrontendCore,$);