!function($){function recursivelyTruncate(node,max_length){return 3==node.nodeType?truncateText(node,max_length):truncateNode(node,max_length)}function truncateNode(node,max_length){var truncatedChild,node=$(node),new_node=node.clone().empty();return node.contents().each(function(){var remaining_length=max_length-new_node.text().length;0!=remaining_length&&(truncatedChild=recursivelyTruncate(this,remaining_length),truncatedChild&&new_node.append(truncatedChild))}),new_node}function truncateText(node,max_length,separator){var text=squeeze(node.data);trailing_whitespace&&(text=text.replace(/^ /,"")),trailing_whitespace=!!text.match(/ $/);var cutat=text.lastIndexOf(" ",max_length),text=text.slice(0,cutat);return text=$("<div/>").text(text).html()}function squeeze(string){return string.replace(/\s+/g," ")}function findNodeForMore(node){var $node=$(node),last_child=$node.children(":last");if(!last_child)return node;var display=last_child.css("display");return display&&"inline"!=display?findNodeForMore(last_child):$node}function findNodeForLess(node){var $node=$(node),last_child=$node.children(":last");return last_child&&last_child.is("p")?last_child:node}var trailing_whitespace=!0;$.fn.truncateCH=function(options){var opts=$.extend({},$.fn.truncateCH.defaults,options);$(this).each(function(){var content_length=$.trim(squeeze($(this).text())).length;if(!(content_length<=opts.max_length)){var actual_max_length=opts.max_length-opts.more.length-opts.link_prefix.length-opts.link_suffix.length,truncated_node=recursivelyTruncate(this,actual_max_length),full_node=$(this).hide();truncated_node.insertAfter(full_node),findNodeForMore(truncated_node).append(opts.link_prefix+'<a href="#more" class="'+opts.css_more_class+'">'+opts.more+"</a>"+opts.link_suffix),findNodeForLess(full_node).append(opts.link_prefix+'<a href="#less" class="'+opts.css_less_class+'">'+opts.less+"</a>"+opts.link_suffix),truncated_node.find("a:last").click(function(){return truncated_node.hide(),full_node.show(),!1}),full_node.find("a:last").click(function(){return truncated_node.show(),full_node.hide(),!1})}})},$.fn.truncateCH.defaults={max_length:100,more:"â€¦more",less:"less",css_more_class:"truncator-link truncator-more",css_less_class:"truncator-link truncator-less",link_prefix:"",link_suffix:""}}(jQuery),function(window,document,oGlobalSettings,FrontendTools,FrontendCore,$){"use strict";FrontendCore.define("truncate",[],function(){function heightByLines(target,nLines){var style=window.getComputedStyle(target,null),height=parseFloat(style.getPropertyValue("height")).toFixed(2),font_size=parseFloat(style.getPropertyValue("font-size")).toFixed(2),line_height=parseFloat(style.getPropertyValue("line-height")).toFixed(2),box_sizing=style.getPropertyValue("box-sizing");if(isNaN(line_height)&&(line_height=1.25*font_size),"border-box"==box_sizing){var padding_top=parseFloat(style.getPropertyValue("padding-top")).toFixed(2),padding_bottom=parseFloat(style.getPropertyValue("padding-bottom")).toFixed(2),border_top=parseFloat(style.getPropertyValue("border-top-width")).toFixed(2),border_bottom=parseFloat(style.getPropertyValue("border-bottom-width")).toFixed(2);height=height-padding_top-padding_bottom-border_top-border_bottom}Math.ceil(height/line_height);return nLines*line_height}function checkTag(nIndex,target){var nTargetOffsetTop=$(target).offset().top,nContainerOffsetTop=$(target).closest(".fc-truncate").offset().top,nOffsetTop=nTargetOffsetTop-nContainerOffsetTop;""===$(target).text().replace(/\n\s+/g,"")?$(target).addClass("fc-hide-on-closed"):(nCurrentHeight+=$(target).height(),nCurrentHeight>nHeight&&$(target).addClass("fc-truncate-apply").height(nHeight-nOffsetTop))}function truncateByLines(oTarget,nIndex){var sId="fc-truncate-"+nIndex,aTags=["p","h1","h2","h3","h4","h5","h6","div"];FrontendTools.loadCSS(oGlobalSettings.sPathCss+"secondary.css?v="+oGlobalSettings.sHash),$(oTarget).wrap('<div id="'+sId+'" class="fc-truncate _closed" data-fc-height="'+$(oTarget).height()+'"></div>'),$("#"+sId).append('<a href="#" class="fc-truncate-link">'+oTarget.getAttribute("data-fc-more")+"</a>");for(var tag in aTags)nCurrentHeight=0,$(aTags[tag],"#"+sId).each(checkTag);$(".fc-truncate").on("click",function(e){e.target.className.indexOf("fc-truncate-link")!==-1&&$(this).hasClass("_closed")&&(e.preventDefault(),$(this).removeClass("_closed").addClass("_opened"))})}var nHeight,nCurrentHeight;return{oTruncates:[],oDefault:{max_length:100,more:"(+)",less:"(-)"},onStart:function(){var aTarget=FrontendTools.getDataModules("truncate"),self=this;FrontendTools.trackModule("JS_Libraries","call","truncate"),self.autobind(aTarget)},autobind:function(aTargets){$(aTargets).each(function(nIndex){var oSettings,oTarget=this,oOptions={};if(null!==oTarget.getAttribute("data-fc-lines"))nHeight=heightByLines(oTarget,oTarget.getAttribute("data-fc-lines"))+30,$(oTarget).height()>nHeight?truncateByLines(oTarget,nIndex):setTimeout(function(){truncateByLines(oTarget,nIndex)},2e3);else{if(null!==oTarget.getAttribute("data-fc-max")&&(oOptions.max_length=oTarget.getAttribute("data-fc-max")),null!==oTarget.getAttribute("data-fc-more")&&(oOptions.more=oTarget.getAttribute("data-fc-more")),"false"===oTarget.getAttribute("data-fc-less")){var css=document.createElement("style");css.type="text/css",css.innerHTML=".truncator-less { display: none; }",document.body.appendChild(css)}else null!==this.getAttribute("data-fc-less")&&(oOptions.less=oTarget.getAttribute("data-fc-less"));$(oTarget).truncateCH(oSettings)}FrontendTools.removeLoading(this)})}}})}(window,document,oGlobalSettings,FrontendTools,FrontendCore,$);