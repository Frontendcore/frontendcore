!function(module,$,undefined){function trimRight(text){return text.replace(/\s*$/,"")}function setText(element,text){if(element.innerText)element.innerText=text;else if(element.nodeValue)element.nodeValue=text;else{if(!element.textContent)return!1;element.textContent=text}}function truncateNearestSibling($element,$rootNode,$clipNode,options){var $prevSibling,$parent=$element.parent();$element.remove();var clipLength=$clipNode?$clipNode.length:0;if($parent.contents().length>clipLength)return $prevSibling=$parent.contents().eq(-1-clipLength),truncateTextContent($prevSibling,$rootNode,$clipNode,options);var $parentSibling=$parent.prev();return $prevSibling=$parentSibling.contents().eq(-1),!!$prevSibling.length&&(setText($prevSibling[0],$prevSibling.text()+options.ellipsis),$parent.remove(),$clipNode.length&&$parentSibling.append($clipNode),!0)}function truncateTextStart($element,$rootNode,$clipNode,options){for(var mid,chunk,element=$element[0],original=$element.text(),maxChunk="",low=0,high=original.length;low<=high;)mid=low+(high-low>>1),chunk=options.ellipsis+trimRight(original.substr(mid-1,original.length)),setText(element,chunk),$rootNode.height()>options.maxHeight?low=mid+1:(high=mid-1,maxChunk=maxChunk.length>chunk.length?maxChunk:chunk);return maxChunk.length>0?(setText(element,maxChunk),!0):truncateNearestSibling($element,$rootNode,$clipNode,options)}function truncateTextEnd($element,$rootNode,$clipNode,options){for(var mid,chunk,element=$element[0],original=$element.text(),maxChunk="",low=0,high=original.length;low<=high;)mid=low+(high-low>>1),chunk=trimRight(original.substr(0,mid+1))+options.ellipsis,setText(element,chunk),$rootNode.height()>options.maxHeight?high=mid-1:(low=mid+1,maxChunk=maxChunk.length>chunk.length?maxChunk:chunk);return maxChunk.length>0?(setText(element,maxChunk),!0):truncateNearestSibling($element,$rootNode,$clipNode,options)}function truncateTextMiddle($element,$rootNode,$clipNode,options){for(var mid,chunk,element=$element[0],original=$element.text(),maxChunk="",low=0,len=original.length,high=len>>1;low<=high;)mid=low+(high-low>>1),chunk=trimRight(original.substr(0,mid))+options.ellipsis+original.substr(len-mid,len-mid),setText(element,chunk),$rootNode.height()>options.maxHeight?high=mid-1:(low=mid+1,maxChunk=maxChunk.length>chunk.length?maxChunk:chunk);return maxChunk.length>0?(setText(element,maxChunk),!0):truncateNearestSibling($element,$rootNode,$clipNode,options)}function truncateTextContent($element,$rootNode,$clipNode,options){return"end"===options.position?truncateTextEnd($element,$rootNode,$clipNode,options):"start"===options.position?truncateTextStart($element,$rootNode,$clipNode,options):truncateTextMiddle($element,$rootNode,$clipNode,options)}function truncateNestedNodeStart($element,$rootNode,$clipNode,options){var $child,child,element=$element[0],$children=$element.contents(),length=$children.length,index=length-1,truncated=!1;for($element.empty();index>=0&&!truncated;index--)$child=$children.eq(index),child=$child[0],8!==child.nodeType&&(element.insertBefore(child,element.firstChild),$clipNode.length&&($.inArray(element.tagName.toLowerCase(),BLOCK_TAGS)>=0?$element.after($clipNode):$element.append($clipNode)),$rootNode.height()>options.maxHeight&&(truncated=3===child.nodeType?truncateTextContent($child,$rootNode,$clipNode,options):truncateNestedNode($child,$rootNode,$clipNode,options)),!truncated&&$clipNode.length&&$clipNode.remove());return truncated}function truncateNestedNodeEnd($element,$rootNode,$clipNode,options){var $child,child,element=$element[0],$children=$element.contents(),index=0,length=$children.length,truncated=!1;for($element.empty();index<length&&!truncated;index++)$child=$children.eq(index),child=$child[0],8!==child.nodeType&&(element.appendChild(child),$clipNode.length&&($.inArray(element.tagName.toLowerCase(),BLOCK_TAGS)>=0?$element.after($clipNode):$element.append($clipNode)),$rootNode.height()>options.maxHeight&&(truncated=3===child.nodeType?truncateTextContent($child,$rootNode,$clipNode,options):truncateNestedNode($child,$rootNode,$clipNode,options)),!truncated&&$clipNode.length&&$clipNode.remove());return truncated}function truncateNestedNode($element,$rootNode,$clipNode,options){return"end"===options.position?truncateNestedNodeEnd($element,$rootNode,$clipNode,options):"start"===options.position?truncateNestedNodeStart($element,$rootNode,$clipNode,options):truncateNestedNodeEnd($element,$rootNode,$clipNode,options)}function Truncate(element,options){if(this.element=element,this.$element=$(element),this._name="truncate",this._defaults={lines:1,ellipsis:"…",showMore:"",showLess:"",position:"end",lineHeight:"auto"},this.options=$.extend({},this._defaults,options),"auto"===this.options.lineHeight){var lineHeightCss=this.$element.css("line-height"),lineHeight=18;"normal"!==lineHeightCss&&(lineHeight=parseInt(lineHeightCss,10)),this.options.lineHeight=lineHeight}this.options.maxHeight===undefined&&(this.options.maxHeight=parseInt(this.options.lines,10)*parseInt(this.options.lineHeight,10)),"start"!==this.options.position&&"middle"!==this.options.position&&"end"!==this.options.position&&(this.options.position="end"),this.$clipNode=$($.parseHTML(this.options.showMore),this.$element),this.original=this.cached=element.innerHTML,this.isTruncated=!1,this.isCollapsed=!0,this.update()}var BLOCK_TAGS=["table","thead","tbody","tfoot","tr","col","colgroup","object","embed","param","ol","ul","dl","blockquote","select","optgroup","option","textarea","script","style"];Truncate.prototype={update:function(html){var wasExpanded=!this.isCollapsed;"undefined"!=typeof html?this.original=this.element.innerHTML=html:this.isCollapsed&&this.element.innerHTML===this.cached&&(this.element.innerHTML=this.original);var $wrap=this.$element.wrapInner("<div/>").children();$wrap.css({border:"none",margin:0,padding:0,width:"auto",height:"auto","word-wrap":"break-word"}),this.isTruncated=!1,$wrap.height()>this.options.maxHeight?(this.isTruncated=truncateNestedNode($wrap,$wrap,this.$clipNode,this.options),this.isExplicitlyCollapsed&&(this.isCollapsed=!0,wasExpanded=!1)):this.isCollapsed=!1,$wrap.replaceWith($wrap.contents()),this.cached=this.element.innerHTML,wasExpanded&&(this.element.innerHTML=this.original)},expand:function(){var includeShowLess=!0;this.isExplicitlyCollapsed&&(this.isExplicitlyCollapsed=!1,includeShowLess=!1),this.isCollapsed&&(this.isCollapsed=!1,this.element.innerHTML=this.isTruncated?this.original+(includeShowLess?this.options.showLess:""):this.original)},collapse:function(retruncate){this.isExplicitlyCollapsed=!0,this.isCollapsed||(this.isCollapsed=!0,retruncate=retruncate||!1,retruncate?this.update():this.element.innerHTML=this.cached)}},$.fn.truncate=function(options){var args=$.makeArray(arguments).slice(1);return this.each(function(){var truncate=$.data(this,"jquery-truncate");truncate?"function"==typeof truncate[options]&&truncate[options].apply(truncate,args):$.data(this,"jquery-truncate",new Truncate(this,options))})},module.Truncate=Truncate}(this,jQuery),function($){function recursivelyTruncate(node,max_length){return 3==node.nodeType?truncateText(node,max_length):truncateNode(node,max_length)}function truncateNode(node,max_length){var truncatedChild,node=$(node),new_node=node.clone().empty();return node.contents().each(function(){var remaining_length=max_length-new_node.text().length;0!=remaining_length&&(truncatedChild=recursivelyTruncate(this,remaining_length),truncatedChild&&new_node.append(truncatedChild))}),new_node}function truncateText(node,max_length,separator){var text=squeeze(node.data);trailing_whitespace&&(text=text.replace(/^ /,"")),trailing_whitespace=!!text.match(/ $/);var cutat=text.lastIndexOf(" ",max_length),text=text.slice(0,cutat);return text=$("<div/>").text(text).html()}function squeeze(string){return string.replace(/\s+/g," ")}function findNodeForMore(node){var $node=$(node),last_child=$node.children(":last");if(!last_child)return node;var display=last_child.css("display");return display&&"inline"!=display?findNodeForMore(last_child):$node}function findNodeForLess(node){var $node=$(node),last_child=$node.children(":last");return last_child&&last_child.is("p")?last_child:node}var trailing_whitespace=!0;$.fn.truncateCH=function(options){var opts=$.extend({},$.fn.truncateCH.defaults,options);$(this).each(function(){var content_length=$.trim(squeeze($(this).text())).length;if(!(content_length<=opts.max_length)){var actual_max_length=opts.max_length-opts.more.length-opts.link_prefix.length-opts.link_suffix.length,truncated_node=recursivelyTruncate(this,actual_max_length),full_node=$(this).hide();truncated_node.insertAfter(full_node),findNodeForMore(truncated_node).append(opts.link_prefix+'<a href="#more" class="'+opts.css_more_class+'">'+opts.more+"</a>"+opts.link_suffix),findNodeForLess(full_node).append(opts.link_prefix+'<a href="#less" class="'+opts.css_less_class+'">'+opts.less+"</a>"+opts.link_suffix),truncated_node.find("a:last").click(function(){return truncated_node.hide(),full_node.show(),!1}),full_node.find("a:last").click(function(){return truncated_node.show(),full_node.hide(),!1})}})},$.fn.truncateCH.defaults={max_length:100,more:"…more",less:"less",css_more_class:"truncator-link truncator-more",css_less_class:"truncator-link truncator-less",link_prefix:"",link_suffix:""}}(jQuery),function(window,document,oGlobalSettings,FrontendTools,FrontendCore,$){"use strict";FrontendCore.define("truncate",[],function(){function bindElements(truncated){$(".js-truncate-more",truncated.$element).on("click",function(e){e.preventDefault(),truncated.expand(),bindElements(truncated)}),$(".js-truncate-less",truncated.$element).on("click",function(e){e.preventDefault(),truncated.collapse(),bindElements(truncated)})}return{oTruncates:[],oDefault:{max_length:100,more:"(+)",less:"(-)"},onStart:function(){var aTarget=FrontendTools.getDataModules("truncate"),self=this;FrontendTools.trackModule("JS_Libraries","call","truncate"),self.autobind(aTarget)},autobind:function(aTargets){var self=this;$(aTargets).each(function(nIndex){var oSettings,oTarget=this,oOptions={};if(null!==oTarget.getAttribute("data-fc-lines")){var oCustomSettings={showMore:'<a href="#" class="js-truncate-more">(+)</a>',showLess:'<a href="#" class="js-truncate-less">(-)</a>'};oOptions.lines=Number(oTarget.getAttribute("data-fc-lines"))+1,null!==oTarget.getAttribute("data-fc-more")&&(oOptions.showMore='<a href="#" class="js-truncate-more">'+oTarget.getAttribute("data-fc-more")+"</a>"),"false"===oTarget.getAttribute("data-fc-less")?oOptions.showLess="":null!==oTarget.getAttribute("data-fc-less")&&(oOptions.showLess='<a href="#" class="js-truncate-less">'+oTarget.getAttribute("data-fc-less")+"</a>"),oSettings=FrontendTools.mergeOptions(oCustomSettings,oOptions),self.oTruncates[nIndex]=new Truncate(oTarget,oSettings),bindElements(self.oTruncates[nIndex])}else{if(null!==oTarget.getAttribute("data-fc-max")&&(oOptions.max_length=oTarget.getAttribute("data-fc-max")),null!==oTarget.getAttribute("data-fc-more")&&(oOptions.more=oTarget.getAttribute("data-fc-more")),"false"===oTarget.getAttribute("data-fc-less")){var css=document.createElement("style");css.type="text/css",css.innerHTML=".truncator-less { display: none; }",document.body.appendChild(css)}else null!==this.getAttribute("data-fc-less")&&(oOptions.less=oTarget.getAttribute("data-fc-less"));$(oTarget).truncateCH(oSettings)}FrontendTools.removeLoading(this)})}}})}(window,document,oGlobalSettings,FrontendTools,FrontendCore,$);