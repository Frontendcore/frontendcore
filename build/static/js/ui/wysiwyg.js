!function(window,document,oGlobalSettings,FrontendTools,FrontendCore,FrontendMediator,$){"use strict";FrontendCore.define("wysiwyg",[],function(){return{_oConstants:{TEXTAREA_SUFIX:"-origin",TextHelp:"Select some text to get some formatting options.",TextVisual:'<i class="icon-eye"></i> VISUAL',TextHtml:'<i class="icon-code"></i> HTML'},oDefault:{toolbar:{buttons:["bold","italic","underline","orderedlist","unorderedlist","anchor"]}},onStart:function(){var aTargets=FrontendTools.getDataModules("wysiwyg"),self=this;FrontendTools.loadCSS(oGlobalSettings.sPathCss+"secondary.css?v="+oGlobalSettings.sHash),FrontendTools.trackModule("JS_Libraries","call","wysiwyg"),require(["wysiwyg-libs"],function(MediumEditor){$(aTargets).each(function(nIndex){null!==this&&self.autobind(this,nIndex,MediumEditor)})})},autobind:function(oTarget,nIndex,MediumEditor){$(oTarget).parent().css("position","relative"),""===oTarget.id&&(oTarget.id="wysiwyg-"+nIndex+this._oConstants.TEXTAREA_SUFIX);var aValues,editor,bMode,self=this,oOptions={},oSettings={},sId=oTarget.id,sValues=oTarget.getAttribute("data-fc-format-options"),textVisual=self._oConstants.TextVisual,textHtml=self._oConstants.TextHtml;if(null!==sValues){aValues=sValues.split(","),oOptions.toolbar={},oOptions.toolbar.buttons=[];for(var nKey=0;aValues.length>nKey;nKey++)"insertorderedlist"===aValues[nKey]&&(aValues[nKey]="orderedlist"),"insertunorderedlist"===aValues[nKey]&&(aValues[nKey]="unorderedlist"),"anchor"===aValues[nKey]&&(aValues[nKey]="unorderedlist"),["inserthorizontalrule"].indexOf(aValues[nKey])===-1&&oOptions.toolbar.buttons.push(aValues[nKey])}null!==oTarget.getAttribute("data-fc-text-help")?oTarget.setAttribute("data-help",oTarget.getAttribute("data-fc-text-help")):oTarget.setAttribute("data-help",self._oConstants.TextHelp),null!==oTarget.getAttribute("data-fc-text-visual")&&(textVisual=oTarget.getAttribute("data-fc-text-visual")),null!==oTarget.getAttribute("data-fc-text-html")&&(textHtml=oTarget.getAttribute("data-fc-text-html")),"false"!==oTarget.getAttribute("data-fc-html")&&$(oTarget).after('<a href="#" id="'+sId+'-switcher" class="button _small _hollow medium-editor-element-switcher">'+self._oConstants.TextHtml+"</a>"),oSettings=FrontendTools.mergeOptions(self.oDefault,oOptions),editor=new MediumEditor("#"+sId,oSettings),$("#"+sId+"-switcher").on("click",function(){"visual"===bMode?(bMode="code",this.innerHTML=textVisual,$(oTarget).trigger("showCode")):(bMode="visual",this.innerHTML=textHtml,$(oTarget).trigger("hideCode"))}),$(oTarget).on("showCode",function(){editor.destroy()}),$(oTarget).on("hideCode",function(){editor.setup()}),FrontendMediator.subscribe("close:wysiwyg",editor.destroy),FrontendTools.removeLoading(oTarget)}}})}(window,document,oGlobalSettings,FrontendTools,FrontendCore,FrontendMediator,$);