!function(a,b){"use strict";function c(a){var b=void 0===a?function(){}:a;o.length===Object.keys(m).length&&(FrontendMediator.publish(["data:finish"]),setTimeout(function(){b()},100))}function d(a,b,c){for(var d in a)"object"==typeof a[d]&&(a[d].innerHTML=b,c(a[d]))}function e(a){var b=[];for(var c in a)b.push(c);return b}function f(a,b){var c,f;b.indexOf("[")!==-1?(f=b.replace("[","").replace("]","").split(","),b=r,c=k[b]):(c=k[b],f=e(c));for(var g=0;g<f.length;g++)void 0===p[f[g]]&&(p[f[g]]=[]),p[f[g]].push(a),q[f[g]]=c[f[g]];FrontendMediator.subscribe(s+a,function(b){var c=void 0!==b.data?b.data:{},e=document.querySelectorAll('[data-fc-render*="'+a+'"]');d(e,l[a].render(c),function(a){var b=a.querySelectorAll("[data-fc-modules]");for(var c in b){var d=b[c];"object"==typeof d&&(""===d.id&&(d.id=FrontendTools.getSelector(d)),void 0===n[d.dataset.fcModules]&&FrontendCore.requireAndStart(d.dataset.fcModules),n[d.dataset.fcModules]=i)}})}),Object.keys(m).length===Object.keys(l).length&&FrontendMediator.publish(["templates:finish"],q)}function g(a){var b,c,d,e;for(var f in m)b=m[f],c=void 0!==m[f].dataset.fcData?m[f].dataset.fcData:r,d=m[f].dataset.fcTemplate,e=m[f].dataset.fcRender,"data"===a?u.Data(c):"template"===a&&u.Template(b,e,d,c)}var h=null,i=!0,j=[],k={},l={},m={},n={},o=[],p={},q={},r="RoundTripData",s="module:",t="data:",u={version:"1.0.0",Bind:h,Data:h,Module:h,Template:h,Error:h};u.Data=function(a,b){var d,e=typeof a,f=[];if("object"===e){var g=a;for(d in g)q[d]=g[d],FrontendMediator.publish([t+d],q);c(b)}else if(a===r){o.push(r+Date.now()),k.RoundTripData=oGlobalSettings.RoundTripData;for(d in k.RoundTripData)q[d]=k.RoundTripData[d],f.push(t+d);FrontendMediator.publish(f,q),c(b)}else if(a.indexOf("[")!==-1){o.push(r+Date.now()),k[r]=oGlobalSettings.RoundTripData;var h=a.replace("[","").replace("]","").split(",");for(d in k.RoundTripData)q[d]=k.RoundTripData[d],h.indexOf(d)!==-1&&f.push(t+d);FrontendMediator.publish(f,q),c(b)}else{var i=a;o.indexOf(i)===-1&&(o.push(i),$.ajax({url:i,async:!1,success:function(a){k[i]=a,c(b)}}))}},u.Template=function(a,c,d,e){j.indexOf(c)===-1&&$.get(d,function(a){l[c]=b({id:c,data:a}),f(c,e),j.push(c)})},u.getModules=function(){return m},a.RoundTrip=u,a.window.onload=function(){var b=a.document.querySelectorAll("[data-fc-render]");void 0!==oGlobalSettings.RoundTripData&&u.Data(oGlobalSettings.RoundTripData);for(var c=0;c<b.length;c++)m[b[c].dataset.fcRender]=b[c];FrontendMediator.subscribe(["data:finish"],function(a){g("template"),FrontendMediator.unsubscribe(["data:finish"])}),FrontendMediator.subscribe(["templates:finish"],function(a){var b,c;for(b in a.data){var d=t+b;c={},c[b]=q[b],FrontendMediator.subscribe(d,function(a){var b=a.name.toString().replace("data:","");for(var c in p[b])FrontendMediator.publish(s+p[b][c],q)})}for(b in q)c={},c[b]=q[b],FrontendMediator.publish(t+b,c)}),g("data")}}(this,twig);