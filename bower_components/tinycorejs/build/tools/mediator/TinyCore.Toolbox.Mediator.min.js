!function(a){"use strict";var b=a.TinyCore,c=b.Utils,d=function(a){this.nSubscriberID=a};d.prototype=function(){var d={},e={};return{subscribe:function(a,f,g){var h=c.isArray(a)?a:[a],i=this.nSubscriberID;h.forEach(function(a){d[a]=d[a]||{},d[a][i]||(d[a][i]=b.debugMode?f.bind(g):c.tryCatchDecorator(g,f,'Error publishing topic "'+a+'": '),e[i]=e[i]||[],e[i].push(a))})},publish:function(b,e,f){var g=f?e:e&&c.extend({},e);c.forIn(d[b],function(c){a.setTimeout(function(){c({name:b,data:g})},0)})},unsubscribe:function(a){for(var b,e=c.isArray(a)?a:[a],f=e.length,g=this.nSubscriberID;f--;)b=d[e[f]],b&&b[g]&&delete b[g]},unsubscribeAll:function(){e[this.nSubscriberID]&&this.unsubscribe(e[this.nSubscriberID])}}}(),b.Toolbox.register("mediator",function(a){return new d(a)})}(this);